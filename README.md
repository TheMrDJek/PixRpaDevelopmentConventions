# Соглашение о написании роботов на PIX

### В этой статье
- [Соглашение о структуре репозитория (в работе)](#соглашение-о-структуре-репозитория)
- [Соглашение о структуре проекта](#соглашение-о-структуре-проекта)
- [Соглашение о шаблонах (в работе)](#соглашение-о-шаблонах)
- [Соглашение об именах](#соглашение-об-именах)
- [Соглашение о скриптах](#соглашение-о-скриптах)
- [Соглашение о переменных (в работе)](#соглашение-о-переменных)
- [Соглашение о БД (в работе)](#соглашение-о-базе-данных)
- [Соглашение о очередях (в работе)](#соглашение-о-очередях)
- [Соглашение о папках и файлах (в работе)](#соглашение-о-папках-и-файлах)
- [Соглашение о UI/Web (в работе)](#соглашение-о-uiweb)
- [Соглашение о логирование (в работе)](#соглашение-о-логирование)
- [Соглашение о исключениях (в работе)](#соглашение-о-исключениях)
- [Соглашение о Мастере (в работе)](#соглашение-о-мастере)
- [Соглашение о Ассетах (в работе)](#соглашение-о-ассетах)

Соглашения о написании роботов на PIX предназначены для реализации следующих целей.

## Соглашение о структуре репозитория
(В работе)

**[⬆ К началу статьи](#в-этой-статье)**

## Соглашение о структуре проекта
<details>
    <summary><b>Разделение проекта на слои</b></summary>
Разбиение этого проекта на несколько слоев на основе обязанностей позволяет повысить удобство поддержки проекта

```console
├───Common (слой шаблонов и прочих файлов)
├───Helpers (слой независимых функций)
├───Infrastructure (слой сервисов)
│   ├───DataBase (сервис бд)
│   ├───Mail (сервис почты)
│   └───PIX Master (сервис мастера)
├───States (слой состояний)
│   ├───Init
│   │   └───Transactions
│   ├───GetSetTransaction
│   │   └───Transactions
│   ├───Process
│   │   └───Transactions
│   └───EndProcess
└───Tests (слой тестов)
    ├───IntegrationTests
    └───UnitTests
```

**[⬆ К началу статьи](#в-этой-статье)**

</details>

## Соглашение о шаблонах
(В работе)

**[⬆ К началу статьи](#в-этой-статье)**


## Соглашение об именах
<details>
    <summary><b>Используйте PascalCasing</b></summary>
Используйте регистр pascal (”PascalCasing”) и префиксы in, out, io при именовании параметров скрипта<br>

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Используйте camelCasing</b></summary>
Используйте регистр camel (”camelCasing”) при именовании переменных в скриптах<br>

![camelCasing](/common/camelCasing.png)

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Не игнорирейте конвенции нейминга языка или компании</b></summary>
Мы должны знать общие правила нейминга в компании и своего языка программирования.<br>
Наш код должен быть достаточно близок к индустрии, из которой будут приходить люди, чтобы его поддерживать и развивать.<br>
В то же время в компании может быть своя прослойка правил,<br>
чтобы поддержка большой кодовой базы была проще и инженеры могли легко переключаться между проектами.<br>

- [Правила и соглашения об именовании C#](https://learn.microsoft.com/ru-ru/dotnet/csharp/fundamentals/coding-style/identifier-names)


**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Наименование должно отражать значение</b></summary>
Переменная — это какие-то данные, какое-то значение, но не стоит её так и называть.<br>
Конкретизируйте. Что за значение мы хотим в ней хранить? Так и назовём переменную.<br>

![domainName](/common/domainName.png)

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте использование несколько вариантов для одного термина</b></summary>
Можно встретить варианты нейминга одних и тех же терминов,<br>
поэтому лучше обговаривать найминг или вести глоссарий<br>

Поставщик: provider, supplier, vendor, contractor<br>
Заказчик: customer, client, consumer<br>
Цена: price, rate, cost, pricing, worth<br>
Объем: volume, amount, size, bulk, quantity<br>
Склад: warehouse, storage, store, storehouse<br>

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте кириллицу</b></summary>
В языках программирования принятно писать используя ASCII Characters,<br>
используя кириллицу появятся недопонимание со стороны других разработчиков и есть риск появления ошибок кодировки<br>

![ruCharts](/common/ruCharts.png)

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте венгерских обозначений</b></summary>
Венгерская нотация повторяет тип, который уже присутствует в объявлении.<br>
Это бессмысленно, поскольку PIX Studio идентифицируют тип.<br>

![FixHungarianNotation](/common/FixHungarianNotation.png)



**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте избыточных названий</b></summary>
В название добавляется тип переменной или избыточный префикс названия объекта.<br>
В итоге мы читаем код как «добавлено дата время» или «корзина — айди корзины».<br>

![Context](/common/Context.png)

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте названий без контекста</b></summary>
Только благодаря значениям  мы поняли, что за source имеется в виду, в каком смысле употреблены state, status.<br>
Без значений всё усложняется — придётся отвлекаться и уточнять, о чём идёт речь.<br>

![NotContext](/common/NotContext.png)

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте абстрактных названий</b></summary>
По названию свойств сложно догадаться, о чём идёт речь.<br>
Почему бы не назвать свойства именем метрики, которую они несут?<br>
Не нужно придумывать лишние обозначения, которые не применяются в реальной жизни.<br>

![Abstract](/common/Abstract.png)


**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте отрицательных переменных</b></summary>
Отрицательные переменные сложные в понимании, а если в коде есть не отрицательные переменные, то легко запутаться<br>

![NotVariables](/common/NotVariables.png)

**[⬆ К началу статьи](#в-этой-статье)**

</details>

## Соглашение о скриптах
<details>
    <summary><b>Соблюдайте SRP (SOLID)</b></summary>

SRP – принцип единой ответственности. Этот принцип означает, что каждый скрипт в вашем коде должен выполнять одну операцию.<br>

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Используйте минимальное кол-во аргументов</b></summary>

- Меньше - лучше<br>
- Если скрипт принимает слишком много аргументов, возможно он нарушает SRP<br>
- Большое кол-во аргументов - проблемы с тестированием<br>
- Большое кол-во аргументов возможно стоит завернуть в объект(например словарь)<br>


**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Используйте LINQ</b></summary>

Используйте LINQ вместо циклов и встроенных активностей при работе с коллекциями<br>

Исключения:<br>
- При работе с внешними сервисами (файлы, почта, БД,UI)
- Большая бизнес логика


**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Используйте новые фичи языка и PIX</b></summary>
Добавить

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте DRY</b></summary>
Добавить

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте комментариев</b></summary>
Комментарии не нужны, пишите самодокументируемый код.

Если комментарии необходимы, стоит задуматься об чистоте кода

Исключения:
- TODO
- Поведения, противоречащее логике

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте флагов в аргументах</b></summary>

Лучше разделить на два например вместо CreateFile → CreateFile, CreateTempFile

**[⬆ К началу статьи](#в-этой-статье)**

</details>

</details>

<details>
    <summary><b>Избегайте глубоких вложенний</b></summary>
Добавить

**[⬆ К началу статьи](#в-этой-статье)**

</details>

</details>

<details>
    <summary><b>Избегайте отрицательных условий</b></summary>
Добавить

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Избегайте громоздких if-ов</b></summary>
Добавить

**[⬆ К началу статьи](#в-этой-статье)**

</details>

<details>
    <summary><b>Временные решения</b></summary>

- Если скрипт часто вызывается, замените его на контейнер (пока не решится вопрос логами)
- Создавайте таблицу кодом, а не активностью. (пока не появится возможность указывать null)

**[⬆ К началу статьи](#в-этой-статье)**

</details>
